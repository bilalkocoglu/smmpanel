<!DOCTYPE html>
<html lang="tr" class="loading"
      xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">

<head th:replace="admin-template :: head"></head>

<body data-col="2-columns" class=" 2-columns ">
  <div class="wrapper">
    <!--.main-menu(class="#{menuColor} #{menuOpenType}", class=(menuShadow == true ? 'menu-shadow' : ''))-->
    <div th:replace="user-template :: sidebar"></div>

    <!-- / main menu-->

    <div class="main-panel">

      <!-- Navbar (Header) Starts-->
      <nav th:replace="user-template :: header" class="navbar navbar-expand-lg navbar-light bg-faded"></nav>

      <!-- Navbar (Header) Ends-->

     <div class="main-content">
      <div class="content-wrapper"><!--Statistics cards Starts-->
        <div th:replace="admin-template :: messages"></div>

        <section id="extended">
          <div class="row destek">
            <div class="col-xl-3 col-lg-3 col-md-3">
              <div class="row" th:each="bankaccount : ${bank_accounts}">
                <div class="card gradient-plum" style="width: 100%;">
                  <div class="card-header">
                    <h4 class="card-title white" th:text="${bankaccount.getBankName()}"></h4>
                  </div>
                  <div class="card-body">
                    <div class="card-block" style="color:white; padding: 10px!important;">
                      <div class="col-12 font-600">
                        Hesap Sahibi :
                        <span class="font-500 text-indigo" th:text="${bankaccount.getAccountHolder()}">FenomenEdio</span>
                      </div>
                      <div class="col-12 font-600">
                        IBAN :
                        <span class="font-500 text-indigo" style="font-size: 14px;" th:text="${bankaccount.getIBAN()}"></span>
                      </div>
                      <div class="col-12 font-600">
                        Hesap No :
                        <span class="font-500 text-indigo" th:text="${bankaccount.getAccountNumber()}"></span>
                      </div>
                      <div class="col-12 font-600">
                        Şube No :
                        <span class="font-500 text-indigo" th:text="${bankaccount.getBranch()}"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-9">
              <section id="bootstrap3">
                <div class="row" >
                  <div class="col-12">
                    <div class="card">
                      <div class="card-header">
                        <h3 class="card-title" style="float: right;">Ödeme Bilgirimleri</h3>
                        <a href="#"
                           style="float: left; margin: 0px; color: white; border: none;"
                           class="btn white btn-round gradient-green-tea" data-toggle="modal" data-target="#bootstrap">
                          Ödeme Bildirimi Yap
                        </a>
                      </div>
                      <div class="card-body collapse show" >
                        <div class="card-block card-dashboard" style="padding-top: 10px !important; overflow-x: scroll" >
                          <table class="table table-striped table-bordered bootstrap-3" >
                            <thead>
                              <tr>
                                <th>Bildirim No</th>
                                <th>Miktar</th>
                                <th>Banka</th>
                                <th>Gönderen</th>
                                <th>İşlem Zamanı</th>
                                <th>Durum</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr th:each="paymentntf : ${payment_notifications}">
                                <td th:text="${paymentntf.getId()}">1</td>
                                <td><span th:text="${paymentntf.getAmount()}"></span> TL</td>
                                <td th:text="${paymentntf.getBankAccount().getBankName()}"></td>
                                <td th:text="${paymentntf.getFullname()}"></td>
                                <td th:text="${paymentntf.getDate() + ' - ' + paymentntf.getTime()}"></td>
                                <td>
                                  <a th:if="${paymentntf.isConfirmation()}" class="btn white btn-round gradient-green-tea">
                                    Onaylandı
                                  </a>
                                  <a th:if="${!paymentntf.isConfirmation()}" class="btn white btn-round gradient-flickr ">
                                    Beklemede
                                  </a>
                                </td>
                              </tr>
                            </tbody>
                            <tfoot>
                              <tr>
                                <th>Bildirim No</th>
                                <th>Miktar</th>
                                <th>Banka</th>
                                <th>Gönderen</th>
                                <th>İşlem Zamanı</th>
                                <th>Durum</th>
                              </tr>
                            </tfoot>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>


</div>
</div>
<div class="modal fade text-left" id="bootstrap" tabindex="-1" role="dialog" aria-labelledby="DestekTalebiModals" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="DestekTalebiModals"> Ödeme Bildirimi Oluştur</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form class="form" id="form" th:action="@{/user/payment-notifications}" th:object="${create_payment_form}" method="post">
        <div class="modal-body">
          <div class="form-group">
            <label for="bankaccountid">Gönderilen Banka</label>
            <select th:field="*{bankAccountId}" id="bankaccountid" name="priority" class="form-control" data-toggle="tooltip" data-trigger="hover" data-placement="top" data-title="Priority">
              <option th:each="bankaccount : ${bank_accounts}" th:value="${bankaccount.getId()}" th:text="${bankaccount.getBankName()}"></option>
            </select>
          </div>
          <div class="form-group">
            <label for="date">İşlem Tarihi</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <span class="fa fa-calendar-o"></span>
                </span>
              </div>
              <input th:field="*{date}" id="date" type='text' required class="form-control pickadate-translations pickadate" placeholder="İşlem Tarihini Seçin" />
            </div>
          </div>
          <div class="form-group">
            <label for="time">İşlem Saati</label>
            <div class="input-group clockpicker"  data-placement="left" data-align="top" data-autoclose="true">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <span class="fa fa-calendar-o"></span>
                </span>
              </div>
              <input id="time" th:field="*{time}" readonly="readonly" required type="text" class="form-control" value="13:14">
              <span class="input-group-addon">
                <i class="icon-date"></i>
              </span>
            </div>
          </div>
          <div class="form-group">
            <label for="amount">Miktar (₺)</label>
            <input id="amount" th:field="*{amount}" required type="number" class="form-control">
          </div>
          <div class="form-group">
            <label for="fullName">Gönderen Adı Soyadı</label>
            <input id="fullName" autocomplete="off" th:field="*{fullName}" required type="text" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-block btn-raised gradient-flickr white" data-dismiss="modal">Kapat</button>
          <button type="submit" class="btn btn-block btn-raised gradient-mint white"><i class="icon-cursor"></i>  Bildirim Yap</button>
        </div>
      </form>
    </div>
  </div>
</div>
  <script th:src="@{/vendors/js/core/jquery-3.2.1.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/core/popper.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/core/bootstrap.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/perfect-scrollbar.jquery.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/prism.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/jquery.matchHeight-min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/screenfull.min.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/pace/pace.min.js}" type="text/javascript"></script>
  <script th:src="@{/js/app-sidebar.js}" type="text/javascript"></script>
  <script th:src="@{/js/notification-sidebar.js}" type="text/javascript"></script>
  <script th:src="@{/js/customizer.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/datatable/datatables.min.js}" type="text/javascript"></script>
  <script th:src="@{/js/data-tables/datatable-styling.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/pickadate/picker.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/pickadate/picker.date.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/pickadate/picker.time.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/pickadate/legacy.js}" type="text/javascript"></script>
<!-- END APEX JS-->
<!-- BEGIN PAGE LEVEL JS-->
  <script th:src="@{/js/pick-a-datetime.js}" type="text/javascript"></script>
  <script th:src="@{/vendors/js/bootstrap-clockpicker.min.js}"  type="text/javascript"></script>
  <script type="text/javascript">
    $('.clockpicker').clockpicker();

    $("#form").submit( function(e) {

      if ( ($('#date').val() === '') || ($('#time').val() === '') || parseInt($('#amount').val()) == 0 ){
        alert( 'Alanları doğru bir şekilde doldurmalısınız !' );
        e.preventDefault();
      }
    });
  </script>

</body>

</html>