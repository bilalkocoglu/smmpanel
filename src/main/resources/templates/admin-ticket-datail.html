<!DOCTYPE html>
<html lang="tr" class="loading"
      xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">

<head th:replace="admin-template :: head"></head>

  <body data-col="2-columns" class=" 2-columns ">
    <div class="wrapper">
      <!--.main-menu(class="#{menuColor} #{menuOpenType}", class=(menuShadow == true ? 'menu-shadow' : ''))-->
        <div th:replace="admin-template :: sidebar"></div>

        <!-- / main menu-->

      <div class="main-panel">

        <!-- Navbar (Header) Starts-->
          <nav th:replace="admin-template :: header" class="navbar navbar-expand-lg navbar-light bg-faded"></nav>

          <!-- Navbar (Header) Ends-->
          
        <div class="main-content">
          <div class="content-wrapper">
              <div th:replace="admin-template :: messages"></div>

              <div class="chat-application">
                  <section class="chat-app-form bg-blue-grey bg-lighten-5" style="padding: 0px; background-color: transparent !important;">
                      <div class="row" style="text-align: center;">
                          <div class="col">
                              <p th:if="${userticket.getTicket().isClosed() == false}">
                                  <a style="color: white; margin:0px;"
                                     th:href="@{'/admin/tickets/close/' + ${userticket.getTicket().getId()}}"
                                     class="btn gradient-ibiza-sunset">
                                      Konuşmayı Sonlandır
                                  </a>
                              </p>
                          </div>
                          <div class="col">
                              <p th:if="${userticket.getTicket().getFromUser().isState() == true}">
                                <a style="color:white; margin:0px;"
                                   th:href="@{'/admin/users/passivate/' + ${userticket.getTicket().getFromUser().getId()}}"
                                   class="btn gradient-king-yna">
                                    Kullanıcıyı Engelle
                                </a>
                              </p>
                          </div>
                      </div>
                  </section>
                  <section style="max-height: 480px;" class="chat-app-window">
                    <div class="badge badge-dark mb-1">Konuşma Geçmişi</div>
                    <div class="chats">
                      <div class="chats">
                        <div th:each="message : ${userticket.getMessages()}"
                             class="chat" th:classappend="${message.isUser() == true} ? chat-left : null" >
                          <div class="chat-body">
                            <div class="chat-content">
                              <p th:text="${message.getMessage()}"></p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>
                  <section class="chat-app-form bg-blue-grey bg-lighten-5" th:if="${userticket.getTicket().isClosed() == false}">
                    <form class="chat-app-input row"
                          th:action="@{'/admin/tickets/response/' + ${userticket.getTicket().getId()}}"
                          th:object="${messagedto}" method="post">
                      <fieldset class="form-group position-relative has-icon-left col-lg-10 col-8 m-0">
                        <div class="form-control-position">
                          <!--<i class="icon-emoticon-smile"></i>-->
                        </div>
                        <input required autocomplete="off" th:field="*{message}" type="text" class="form-control" id="newmessage" placeholder="Bir mesaj giriniz !"
                         >
                        <div class="form-control-position control-position-right">
                          <!--<i class="ft-image"></i>-->
                        </div>
                      </fieldset>
                      <fieldset class="form-group position-relative has-icon-left col-lg-2 col-4 m-0">
                        <button type="submit" class="btn btn-raised btn-primary">
                          <i class="fa fa-paper-plane-o hidden-lg-up"></i> Gönder
                        </button>
                      </fieldset>
                    </form>
                  </section>
              </div>
          </div>
        </div>
      

      </div>
    </div>
    <script th:src="@{/vendors/js/core/jquery-3.2.1.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/core/popper.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/core/bootstrap.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/perfect-scrollbar.jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/prism.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/jquery.matchHeight-min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/screenfull.min.js}" type="text/javascript"></script>
    <script th:src="@{/vendors/js/pace/pace.min.js}" type="text/javascript"></script>
    <script th:src="@{/js/app-sidebar.js}" type="text/javascript"></script>
    <script th:src="@{/js/notification-sidebar.js}" type="text/javascript"></script>
    <script th:src="@{/js/customizer.js}" type="text/javascript"></script>
    <script>
        window.onload = function () {
            $('#newmessage').focus();
        };
    </script>
  </body>

</html>